<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>CORS ajax跨域测试</title>
	<style>
pre {
    padding: 10px;
    margin: 100px 0;
    font-size: 14px;
    line-height: 1.5;
    background-color: rgba(0,0,0,.05);
    white-space: pre-wrap;
    word-break: break-all;
    font-family: "Lucida Console", Consolas, Monaco;
}
	</style>
</head>
<body>
<button id="button">点击按钮返回一张随机图片地址</button>
<p id="result">&nbsp;</p>

<pre>&lt;button id="button"&gt;点击按钮返回一张随机图片地址&lt;/button&gt;
&lt;p id="result"&gt;&amp;nbsp;&lt;/p&gt;</pre>
<pre>var button = document.getElementById('button');
var result = document.getElementById('result');

button.addEventListener('click', function () {
    var xhr = new XMLHttpRequest();
    xhr.open('post', 'http://www.zhangxinxu.com/study/201802/cros-ajax.php');
    xhr.onload = function () {
        result.innerHTML = xhr.responseText;
    };
    xhr.send(null);
});</pre>

<script>
var button = document.getElementById('button');
var result = document.getElementById('result');

button.addEventListener('click', function () {
	// 请求方式随机
	var method = Math.random() > 0.5 ? 'get' : 'post';
	var xhr = new XMLHttpRequest();
	xhr.open(method, 'http://www.zhangxinxu.com/study/201802/cros-ajax.php');
	xhr.onload = function () {
		result.innerHTML = xhr.responseText;
	};
	xhr.send(null);
});
</script>	
</body>
</html>